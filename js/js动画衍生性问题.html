<!DOCTYPE html>
<html>
<head>
	<title>js动画(细节问题)</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		#box1{
			width: 200px;
			height: 200px;
			background-color: red;
			position: absolute;
			top: 200px;
			left: 600px;
		}
		#box2{
			width: 1px;
			height: 800px;
			border-right: 1px solid black;
			position: absolute;
			top: 0px;
			left: 311px;
		}
	</style>
	<script>
		window.onload=function(){
			var oBtn=document.getElementById('btn');
			var oBox=document.getElementById('box1');
			var timer=null;
			oBtn.onclick=function(){
				////此处衍生第三个问题，若初始left值大于目标left值，用负值速度解决
				var iSpeed;
					if(311<oBox.offsetLeft){
						iSpeed=-10;
					}
					else{
						iSpeed=10;
					}
				timer=setInterval(function(){
					if(Math.abs(311-oBox.offsetLeft)<=Math.abs(iSpeed)){
						clearInterval(timer);
						oBox.style.left='311px';
					}
					else{
						oBox.style.left=oBox.offsetLeft+iSpeed+'px';
						
					}
					console.log(oBox.offsetLeft+"$$"+iSpeed);
					// if(oBox.offsetLeft>=311){
					// 	clearInterval(timer);
					// }
					// else{ 
					// 	//此处衍生第二个问题，下边一行代码需写在else{}里边；
					// 	//此处衍生第四个问题,速度为10不能恰好等于311
					// }
					//此处衍生第一个问题用 (元素.offsetLeft)解决	
				},30);
			}
		}
	</script>
</head>
<body>
	<input type="button" value="开始动画" id="btn">
	<div id="box1"></div>
	<div id="box2"></div>
</body>
</html>