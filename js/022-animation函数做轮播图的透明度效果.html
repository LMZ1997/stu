<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>animation函数完善小米轮播图</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		div{
			width: 1000px;
			height: 500px;
			margin: 100px auto;
			position: relative;
		}
		#ul1{
			width: 100%;
			height: 100%;
		}
		
		 #ul1 li{
			list-style: none;
			width: 100%;
			height: 100%;
			position: absolute;
			top: 0;
			left: 0;
		}
		 #ul1 li img{
			width: 1000px;
			height: 500px;
		}
		#ul2{
			position: absolute;
			right: 10px;
			bottom: 10px;
			z-index: 1200;
		}
		#ul2 li{
			float: left;
			margin-right: 30px;
			color: blue;

		}
		span{
			width: 40px;
			height: 40px;
			font-size: 30px;
			text-align: center;
			line-height: 40px;
			background-color: rgba(255,255,255,0.3);
			position: absolute;
			top: 220px;
			color: white;
			z-index: 1000;
		}
		#preBtn{
			left: 10px;
		}
		#nextBtn{
			right: 10px;
		}
		#ul2 .active{
			color: green;
		}
	</style>
	<script src="js/animation.js"></script>
	<script>
		window.onload=function(){
			var aLi1=document.getElementById('ul1').children;
			var aLi2=document.getElementById('ul2').children;	
			var nextBtn=document.getElementById('nextBtn');
			var preBtn=document.getElementById('preBtn');
			// var aImg=document.getElementsByTagName('img');
			// for (var i = 0; i < aImg.length; i++) {
			// 	animation(aImg[i],{'opacity':100},false);				
			// }
			var now=0;
			function tab(){
				for (var i = 0; i < aLi1.length; i++) {
					aLi1[i].style.zIndex=0;
					aLi1[i].style.opacity=0;
					aLi2[i].className='';
				}
				aLi1[now].style.zIndex=30;
				aLi2[now].className='active';
				animation(aLi1[now],{'opacity':100},false)
			}
			nextBtn.onclick=function(){
				// for (var i = 0; i < aLi1.length; i++) {
				// 	aLi1[i].style.zIndex=0;
				// }
				now++;
				if(now>=aLi1.length){
					now=0;
				}
				tab();
				// aLi1[now].style.zIndex=30;
			}
			preBtn.onclick=function(){
				now--;
				if(now<0){
					now=aLi1.length-1;
				}
				tab();

			}
			for (var i = 0; i < aLi2.length; i++) {
					aLi2[i].index=i;
					aLi2[i].onclick=function(){
					now=this.index;		
					tab();
				}
			}
			setInterval(function(){
				now++;
				if(now>=aLi1.length){
					now=0;
				}
				tab();
			},3000)

		}
	</script>
</head>
<body>
	<div id="box">
		<ul id="ul1">
			<li style="z-index: 30;"><img src="images/2.jpg"></li>
			<li><img src="images/3.jpg"></li>
			<li><img src="images/4.jpg"></li>
		</ul>
		<span id="preBtn">&lt;</span>
		<span id="nextBtn">&gt;</span>
		<ul id="ul2">
			<li class="active"></li>
			<li></li>
			<li></li>
		</ul>
	</div>
</body>
</html>